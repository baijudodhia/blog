<head>
    {% if page.url contains '404.html' %}
        {% assign is404Page = true %}
    {% endif %}

    {% assign site_url = site.url | append: site.baseurl | append: '/' %}
    {% assign page_url = site.url | append: site.baseurl | append: page.url | remove: "index.html" %}
    {% if site_url == page_url %}
        {% assign isHomePage = true %}
    {% endif %}
    
    {% if page.tags and page.category %}
        {% assign page_tags = page.tags | join: ', ' | split: '-' | join: ' ' %}
        {% assign page_category = page.category %}
        {% assign description =  "Blog post about " | append: page_category | append: ', ' | append: page_tags | append: ' etc.' %}
        {% if page.excerpt %}
            {% assign meta_description =  description | append: ' ' | append: page.excerpt %}
        {% else %}
            {% assign meta_description =  description %}
        {% endif %}
    {% else %}
        {% assign meta_description = site.description %}
    {% endif %}

    <title>{% if is404Page != true %}{% if page.content != "" %}{{ page.title }} | {% endif %}{% endif %}{{ site.title }}</title>
    
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta name="author" content="Baiju Dodhia" />
    <meta name="color-scheme" content="light">
    <meta name="copyright" content="Baiju Dodhia" />
    <meta name="description" content="{{meta_description}}" />
    <meta name="designer" content="Baiju Dodhia" />
    <meta name="geo.region" content="IN" />
    <meta name="keywords" content="{% if page.tags and page.category %}{{ page.category }}, {{ page.tags | join: ', ' | split: '-' | join: ' ' }}{% else %}{{ site.keywords }}{% endif %}" />
    <meta name="language" content="EN" />
    <meta name="owner" content="Baiju Dodhia" />
    <meta name="robots" content="INDEX, FOLLOW" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    {% if is404Page == true %}<meta name="robots" content="noindex, nofollow">{% endif %}
    
    <!-- Open Graph -->
    <meta property="article:author" content="{{ site.author.name }}" />
    <meta property="article:published_time" content="{{ page.date }}" />
    <meta property="article:publisher" content="https://baijudodhia.github.io/" />
    <meta property="og:description" content="{{meta_description}}">
    <meta property="og:locale" content="en_IN">
    <meta property="og:site_name" content="Blog - Baiju Dodhia">
    <meta property="og:title" content="{%if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
    <meta property="og:type" content="article">
    <meta property="og:url" content="{{ site.url | append: site.baseurl | append: page.url | remove: "index.html" }}">

    <!-- Analytics -->
    <script src="{{ '/assets/scripts/analytics.js' | relative_url }}"></script>

    {% if isHomePage == true %}
    <!-- Google SiteLink Search Schema -->
    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "url": "https://baijudodhia.github.io/",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://baijudodhia.github.io/blog/search?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
    </script>
    {% endif %}

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Lora&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ "/assets/main.css" | relative_url }}">
    <link rel="stylesheet" href="{{ "/assets/styles/syntax-fruity.css" | relative_url }}">

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ "/assets/favicon/apple-touch-icon.png" | relative_url }}">
    <link rel="shortcut icon" type="image/png" sizes="16x16" href="{{ "/assets/favicon/android-chrome-192x192.png" | relative_url }}">
    <link rel="shortcut icon" type="image/png" sizes="16x16" href="{{ "/assets/favicon/android-chrome-512x512.png" | relative_url }}">
    <link rel="shortcut icon" type="image/png" sizes="16x16" href="{{ "/assets/favicon/favicon-16x16.png" | relative_url }}">
    <link rel="shortcut icon" type="image/png" sizes="16x16" href="{{ "/assets/favicon/favicon.ico" | relative_url }}">
    <link rel="shortcut icon" type="image/png" sizes="32x32" href="{{ "/assets/favicon/favicon-32x32.png" | relative_url }}">

    <!-- Scripts -->
    <script src="{{ '/assets/scripts/main.js' | relative_url }}"></script>

    {% assign page_content = page.content | strip_html %}
    {% if  page_content != "" and is404Page != true %}
    <!-- Post Schema -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "BlogPosting",
            "url": "{{ site.url | append: site.baseurl | append: page.url }}",
            "name": {{ page.title | jsonify }},
            "headline": {{ page.title | jsonify }},
            "keywords": "{{ page.category }}, {{ page.tags | join: ', ' | split: '-' | join: ' ' }}",
            "description": {{ meta_description | jsonify }},
            "articleBody": {{ page.content | strip_html | jsonify }},
            "datePublished": {{ page.date | jsonify }},
            "dateModified": {{ page.last_modified_at | default: page.date | jsonify }},
            "image": [
                "http://source.unsplash.com/100x100/?{{ page.tags | join: ', ' | split: '-' | join: ' ' | split: ' ' | join: '' }}",
                "http://source.unsplash.com/400x300/?{{ page.tags | join: ', ' | split: '-' | join: ' ' | split: ' ' | join: '' }}",
                "http://source.unsplash.com/1600x900/?{{ page.tags | join: ', ' | split: '-' | join: ' ' | split: ' ' | join: '' }}"
            ],
            "author": {
                "@type": "Person",
                "name": {{ site.author | jsonify }},
                "url": "https://baijudodhia.github.io/"
            },
            "publisher": {
                "@type": "Professional",
                "name": {{ site.author | jsonify }},
                "url": "https://baijudodhia.github.io/"
            },
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "{{ site.url }}{{ page.url }}"
            }
        }
    </script>
    {% endif %}
</head>