<!DOCTYPE html>
<html data-theme="light" lang="en"><head>
    

    
    
    
    
    

    <title>Jekyll Code Syntax Highlighting | Blog - Baiju Dodhia</title>
    
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta name="author" content="Baiju Dodhia" />
    <meta name="color-scheme" content="light">
    <meta name="copyright" content="Baiju Dodhia" />
    <meta name="description" content="Blog post about technology, jekyll, syntax highlight etc. Check various code syntax highlighting in jekyll for languages such as Ruby, CS, JavaScript." />
    <meta name="designer" content="Baiju Dodhia" />
    <meta name="geo.region" content="IN" />
    <meta name="keywords" content="technology, jekyll, syntax highlight" />
    <meta name="language" content="EN" />
    <meta name="owner" content="Baiju Dodhia" />
    <meta name="robots" content="INDEX, FOLLOW" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    
    
    <!-- Open Graph -->
    <meta property="article:author" content="Baiju Dodhia" />
    <meta property="article:published_time" content="2021-12-11 17:49:44 +0000" />
    <meta property="article:publisher" content="https://baijudodhia.github.io/" />
    <meta property="og:description" content="Blog post about technology, jekyll, syntax highlight etc. Check various code syntax highlighting in jekyll for languages such as Ruby, CS, JavaScript.">
    <meta property="og:image" content="https://baijudodhia.github.io/blog/assets/social-media-preview/social-preview.png"/>
    <meta property="og:locale" content="en_IN">
    <meta property="og:site_name" content="Jekyll Code Syntax Highlighting">
    <meta property="og:title" content="Jekyll Code Syntax Highlighting">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://baijudodhia.github.io/blog/technology/code-syntax-highlight-in-jekyll-markdown/">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:description" content="Blog post about technology, jekyll, syntax highlight etc. Check various code syntax highlighting in jekyll for languages such as Ruby, CS, JavaScript." />
    <meta property="twitter:image" content="https://baijudodhia.github.io/blog/assets/social-media-preview/social-preview.png"/>
    <meta property="twitter:site" content="https://baijudodhia.github.io/blog/" />
    <meta property="twitter:title" content="Jekyll Code Syntax Highlighting">
    <meta property="twitter:url" content="https://baijudodhia.github.io/blog/" />

    <!-- Analytics -->
    <script src="/blog/assets/scripts/analytics.js"></script>

    

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Lora&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/blog/assets/main.css">
    <link rel="stylesheet" href="/blog/assets/styles/syntax-fruity.css">

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="57x57" href="/blog/assets/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/blog/assets/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/blog/assets/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/blog/assets/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/blog/assets/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/blog/assets/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/blog/assets/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/blog/assets/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/blog/assets/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/blog/assets/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/blog/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/blog/assets/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/blog/assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="/blog/assets/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/blog/assets/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <!-- Scripts -->
    <script src="/blog/assets/scripts/main.js"></script>

    
    
    <!-- Post Schema -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "BlogPosting",
            "url": "https://baijudodhia.github.io/blog/technology/code-syntax-highlight-in-jekyll-markdown/",
            "name": "Jekyll Code Syntax Highlighting",
            "headline": "Jekyll Code Syntax Highlighting",
            "keywords": "technology, jekyll, syntax highlight",
            "description": "Blog post about technology, jekyll, syntax highlight etc. Check various code syntax highlighting in jekyll for languages such as Ruby, CS, JavaScript.",
            "articleBody": "Ruby:\n\n1\n2\n3\n4\n5\ndef print_hi(name)\n    puts \"Hi, #{name}\"\nend\nprint_hi('Tom')\n#=&gt; prints 'Hi, Tom' to STDOUT.\n\n\nCS\n\n1\n2\n3\n4\npublic interface ITest : ITestKey\n{\n    Task&lt;string&gt; SayHello(string name);\n}\n\n\nScala\n\n1\n2\n3\ndef test(i: Int): Unit = {\n    println(i)\n}\n\n\nJavascript\n\n1\n2\n3\nfunction test(a: 1) {\n    console.log(a);\n}\n\n\nPython\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n'''\nscrape lyrics from vagalume.com.br\n(author: thiagomarzagao.com)\n'''\n\nimport json\nimport time\nimport pickle\nimport requests\nfrom bs4 import BeautifulSoup\n\n# get each genre's URL\n\nbasepath = 'http://www.vagalume.com.br'\nr = requests.get(basepath + '/browse/style/')\nsoup = BeautifulSoup(r.text)\ngenres = [u'Rock']\nu'Ax\\u00E9',\nu'Forr\\u00F3',\nu'Pagode',\nu'Samba',\nu'Sertanejo',\nu'MPB',\nu'Rap']\ngenre*urls = {}\nfor genre in genres:\ngenre_urls[genre] = soup.find('a', class* = 'eA', text = genre).get('href')\n\n# get each artist's URL, per genre\n\nartist*urls = {e: [] for e in genres}\nfor genre in genres:\nr = requests.get(basepath + genre_urls[genre])\nsoup = BeautifulSoup(r.text)\ncounter = 0\nfor artist in soup.find_all('a', class* = 'top'):\ncounter += 1\nprint 'artist {} \\r'.format(counter)\nartist_urls[genre].append(basepath + artist.get('href'))\ntime.sleep(2) # don't reduce the 2-second wait (here or below) or you get errors\n\n# get each lyrics, per genre\n\napi = 'http://api.vagalume.com.br/search.php?musid='\ngenre_lyrics = {e: {} for e in genres}\nfor genre in artist_urls:\nprint len(artist_urls[genre])\ncounter = 0\nartist1 = None\nfor url in artist_urls[genre]:\nsuccess = False\nwhile not success: # foor loop in case your connection flickers\ntry:\nr = requests.get(url)\nsuccess = True\nexcept:\ntime.sleep(2)\nsoup = BeautifulSoup(r.text)\nhrefs = soup.find_all('a')\nfor href in hrefs:\nif href.has_attr('data-song'):\nsong_id = href['data-song']\nprint song_id\ntime.sleep(2)\nsuccess = False\nwhile not success:\ntry:\nsong_metadata = requests.get(api + song_id).json()\nsuccess = True\nexcept:\ntime.sleep(2)\nif 'mus' in song_metadata:\nif 'lang' in song_metadata['mus'][0]: # discard if no language info\nlanguage = song_metadata['mus'][0]['lang']\nif language == 1: # discard if language != Portuguese\nif 'text' in song_metadata['mus'][0]: # discard if no lyrics\nartist2 = song_metadata['art']['name']\nif artist2 != artist1:\nif counter &gt; 0:\nprint artist1.encode('utf-8') # change as needed\ngenre_lyrics[genre][artist1] = artist_lyrics\nartist1 = artist2\nartist_lyrics = []\nlyrics = song_metadata['mus'][0]['text']\nartist_lyrics.append(lyrics)\ncounter += 1\nprint 'lyrics {} \\r'.format(counter)\n\n    # serialize\n    with open(genre + '.json', mode = 'wb') as fbuffer:\n        json.dump(genre_lyrics[genre], fbuffer)\n\n\nCheck out the Jekyll docs for more info on how to get the most out of Jekyll. File all bugs/feature requests at Jekyll’s GitHub repo. If you have questions, you can ask them on Jekyll Talk.\n\n",
            "datePublished": "2021-12-11 17:49:44 +0000",
            "dateModified": "2021-12-11 17:49:44 +0000",
            "image": [
                "http://source.unsplash.com/100x100/?jekyll,syntaxhighlight",
                "http://source.unsplash.com/400x300/?jekyll,syntaxhighlight",
                "http://source.unsplash.com/1600x900/?jekyll,syntaxhighlight"
            ],
            "author": {
                "@type": "Person",
                "name": {"name":"Baiju Dodhia","url":"https://baijudodhia.github.io/"},
                "url": "https://baijudodhia.github.io/"
            },
            "publisher": {
                "@type": "Professional",
                "name": {"name":"Baiju Dodhia","url":"https://baijudodhia.github.io/"},
                "url": "https://baijudodhia.github.io/"
            },
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "https://baijudodhia.github.io/technology/code-syntax-highlight-in-jekyll-markdown/"
            }
        }
    </script>
    
</head><body>
    <div id="body-header"><div class="header-container">
  <div class="header">
    <button onclick="toggleSidebar()" class="header-toggler" aria-label="Menu">
      <span class="header-toggler-bar"></span>
      <span class="header-toggler-bar"></span>
      <span class="header-toggler-bar"></span>
    </button>
    <div class="header-logo">
        <img src=/blog/assets/logo/logo.png alt="The Tech Blog Logo" width="24" height="24"/>
        <a href="/blog/">
            Blog
        </a>
    </div>
    <div class="header-nav">
        
        <div class="header-nav-link">
            <a href="/blog/" class="header-nav-link-item ">Home</a>
        </div>
        <div class="header-nav-link">
            <a href="/blog/category" class="header-nav-link-item ">Category</a>
        </div>
        <div class="header-nav-link">
            <a href="/blog/tag" class="header-nav-link-item ">Tag</a>
        </div>
    </div>
    <div class="header-misc">
        <div class="header-search-container">
            <a class="header-search-btn" href="/blog/search" aria-label="Search" title="Search">
                <i aria-hidden="true" class='fa fa-search'></i>
            </a>
        </div>
    </div>
  </div>
</div>
</div>
    <div id="content">
        <div id="body-sidebar"><div id="sidebar-container">
    <div id="sidebar">
        <div class="sidebar-nav">
            
            <div class="sidebar-nav-link">
                <a href="/blog/"
                    class="sidebar-nav-link-item ">Home</a>
            </div>
            <div class="sidebar-nav-link">
                <a href="/blog/category"
                    class="sidebar-nav-link-item ">Category</a>
            </div>
            <div class="sidebar-nav-link">
                <a href="/blog/tag"
                    class="sidebar-nav-link-item ">Tag</a>
            </div>
        </div>
        <div class="sidebar-footer">
            <a class="sidebar-footer-link" rel="noopener" href="https://baijudodhia.github.io?utm_source=blog&utm_medium=sidebar"
                target="_blank">
                <i aria-hidden="true" class="fa fa-globe"></i>
                <span>baijudodhia.github.io</span>
            </a>
            <a class="sidebar-footer-link" rel="noopener" href="https://www.github.com/baijudodhia/" target="_blank">
                <i aria-hidden="true" class="fa fa-github"></i>
                <span>baijudodhia</span>
            </a>
            <a class="sidebar-footer-link" rel="noopener" href="https://www.linkedin.com/in/baijudodhia/" target="_blank">
                <i aria-hidden="true" class="fa fa-linkedin"></i>
                <span>baijudodhia</span>
            </a>
        </div>
    </div>
</div>
<script>
    document.addEventListener("click", (e) => {
        if (document.getElementById("sidebar-container").contains(e.target)) {
            document
                .getElementById("sidebar-container")
                .classList
                .remove("show");
            document
                .querySelector(".header-toggler")
                .classList
                .remove("active");
        }
    });
</script>
</div>
        <div id="body-main">
            <main>
                <div class="post">
    <div class="post-header">
        <div class="post-header-container">
            <div class="post-title">
                Jekyll Code Syntax Highlighting
            </div>
            <div class="post-date">
                posted on
                <b>
                    <time class="dt-published" datetime="2021-12-11T17:49:44+00:00" itemprop="datePublished">Dec 11, 2021
                    </time>
                </b>
            </div>
            <div class="post-author">
                by <b>Baiju Dodhia</b>
            </div>
            <div></div>
            <div class="post-tags">
                
                    
    
    
    <a class="badge-tag" href='/blog/tag/jekyll' title=jekyll rel="noopener">jekyll</a>


                
                    
    
    
    <a class="badge-tag" href='/blog/tag/syntax-highlight' title=syntax-highlight rel="noopener">syntax highlight</a>


                
            </div>
        </div>
    </div>
    <div class="post-body">
        <div class="post-content">
            <p>Ruby:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">print_hi</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="s2">"Hi, </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
<span class="n">print_hi</span><span class="p">(</span><span class="s1">'Tom'</span><span class="p">)</span>
<span class="c1">#=&gt; prints 'Hi, Tom' to STDOUT.</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>CS</p>

<figure class="highlight"><pre><code class="language-cs" data-lang="cs"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">public</span> <span class="k">interface</span> <span class="nc">ITest</span> <span class="p">:</span> <span class="n">ITestKey</span>
<span class="p">{</span>
    <span class="n">Task</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="nf">SayHello</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Scala</p>

<figure class="highlight"><pre><code class="language-scala" data-lang="scala"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">def</span> <span class="nf">test</span><span class="o">(</span><span class="n">i</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Unit</span> <span class="o">=</span> <span class="o">{</span>
    <span class="nf">println</span><span class="o">(</span><span class="n">i</span><span class="o">)</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Javascript</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="kd">function</span> <span class="nx">test</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Python</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
</pre></td><td class="code"><pre><span class="s">'''
scrape lyrics from vagalume.com.br
(author: thiagomarzagao.com)
'''</span>

<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="c1"># get each genre's URL
</span>
<span class="n">basepath</span> <span class="o">=</span> <span class="s">'http://www.vagalume.com.br'</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">basepath</span> <span class="o">+</span> <span class="s">'/browse/style/'</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">genres</span> <span class="o">=</span> <span class="p">[</span><span class="sa">u</span><span class="s">'Rock'</span><span class="p">]</span>
<span class="sa">u</span><span class="s">'Ax</span><span class="se">\u00E9</span><span class="s">'</span><span class="p">,</span>
<span class="sa">u</span><span class="s">'Forr</span><span class="se">\u00F3</span><span class="s">'</span><span class="p">,</span>
<span class="sa">u</span><span class="s">'Pagode'</span><span class="p">,</span>
<span class="sa">u</span><span class="s">'Samba'</span><span class="p">,</span>
<span class="sa">u</span><span class="s">'Sertanejo'</span><span class="p">,</span>
<span class="sa">u</span><span class="s">'MPB'</span><span class="p">,</span>
<span class="sa">u</span><span class="s">'Rap'</span><span class="p">]</span>
<span class="n">genre</span><span class="o">*</span><span class="n">urls</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">genre</span> <span class="ow">in</span> <span class="n">genres</span><span class="p">:</span>
<span class="n">genre_urls</span><span class="p">[</span><span class="n">genre</span><span class="p">]</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="n">class</span><span class="o">*</span> <span class="o">=</span> <span class="s">'eA'</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">genre</span><span class="p">).</span><span class="n">get</span><span class="p">(</span><span class="s">'href'</span><span class="p">)</span>

<span class="c1"># get each artist's URL, per genre
</span>
<span class="n">artist</span><span class="o">*</span><span class="n">urls</span> <span class="o">=</span> <span class="p">{</span><span class="n">e</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">genres</span><span class="p">}</span>
<span class="k">for</span> <span class="n">genre</span> <span class="ow">in</span> <span class="n">genres</span><span class="p">:</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">basepath</span> <span class="o">+</span> <span class="n">genre_urls</span><span class="p">[</span><span class="n">genre</span><span class="p">])</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">soup</span><span class="p">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="n">class</span><span class="o">*</span> <span class="o">=</span> <span class="s">'top'</span><span class="p">):</span>
<span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">print</span> <span class="s">'artist {} </span><span class="se">\r</span><span class="s">'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span>
<span class="n">artist_urls</span><span class="p">[</span><span class="n">genre</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">basepath</span> <span class="o">+</span> <span class="n">artist</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'href'</span><span class="p">))</span>
<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># don't reduce the 2-second wait (here or below) or you get errors
</span>
<span class="c1"># get each lyrics, per genre
</span>
<span class="n">api</span> <span class="o">=</span> <span class="s">'http://api.vagalume.com.br/search.php?musid='</span>
<span class="n">genre_lyrics</span> <span class="o">=</span> <span class="p">{</span><span class="n">e</span><span class="p">:</span> <span class="p">{}</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">genres</span><span class="p">}</span>
<span class="k">for</span> <span class="n">genre</span> <span class="ow">in</span> <span class="n">artist_urls</span><span class="p">:</span>
<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">artist_urls</span><span class="p">[</span><span class="n">genre</span><span class="p">])</span>
<span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">artist1</span> <span class="o">=</span> <span class="bp">None</span>
<span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">artist_urls</span><span class="p">[</span><span class="n">genre</span><span class="p">]:</span>
<span class="n">success</span> <span class="o">=</span> <span class="bp">False</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span> <span class="c1"># foor loop in case your connection flickers
</span><span class="k">try</span><span class="p">:</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">success</span> <span class="o">=</span> <span class="bp">True</span>
<span class="k">except</span><span class="p">:</span>
<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
<span class="n">hrefs</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">'a'</span><span class="p">)</span>
<span class="k">for</span> <span class="n">href</span> <span class="ow">in</span> <span class="n">hrefs</span><span class="p">:</span>
<span class="k">if</span> <span class="n">href</span><span class="p">.</span><span class="n">has_attr</span><span class="p">(</span><span class="s">'data-song'</span><span class="p">):</span>
<span class="n">song_id</span> <span class="o">=</span> <span class="n">href</span><span class="p">[</span><span class="s">'data-song'</span><span class="p">]</span>
<span class="k">print</span> <span class="n">song_id</span>
<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">success</span> <span class="o">=</span> <span class="bp">False</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
<span class="k">try</span><span class="p">:</span>
<span class="n">song_metadata</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">api</span> <span class="o">+</span> <span class="n">song_id</span><span class="p">).</span><span class="n">json</span><span class="p">()</span>
<span class="n">success</span> <span class="o">=</span> <span class="bp">True</span>
<span class="k">except</span><span class="p">:</span>
<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">if</span> <span class="s">'mus'</span> <span class="ow">in</span> <span class="n">song_metadata</span><span class="p">:</span>
<span class="k">if</span> <span class="s">'lang'</span> <span class="ow">in</span> <span class="n">song_metadata</span><span class="p">[</span><span class="s">'mus'</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span> <span class="c1"># discard if no language info
</span><span class="n">language</span> <span class="o">=</span> <span class="n">song_metadata</span><span class="p">[</span><span class="s">'mus'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">'lang'</span><span class="p">]</span>
<span class="k">if</span> <span class="n">language</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="c1"># discard if language != Portuguese
</span><span class="k">if</span> <span class="s">'text'</span> <span class="ow">in</span> <span class="n">song_metadata</span><span class="p">[</span><span class="s">'mus'</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span> <span class="c1"># discard if no lyrics
</span><span class="n">artist2</span> <span class="o">=</span> <span class="n">song_metadata</span><span class="p">[</span><span class="s">'art'</span><span class="p">][</span><span class="s">'name'</span><span class="p">]</span>
<span class="k">if</span> <span class="n">artist2</span> <span class="o">!=</span> <span class="n">artist1</span><span class="p">:</span>
<span class="k">if</span> <span class="n">counter</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="k">print</span> <span class="n">artist1</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span> <span class="c1"># change as needed
</span><span class="n">genre_lyrics</span><span class="p">[</span><span class="n">genre</span><span class="p">][</span><span class="n">artist1</span><span class="p">]</span> <span class="o">=</span> <span class="n">artist_lyrics</span>
<span class="n">artist1</span> <span class="o">=</span> <span class="n">artist2</span>
<span class="n">artist_lyrics</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">lyrics</span> <span class="o">=</span> <span class="n">song_metadata</span><span class="p">[</span><span class="s">'mus'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">'text'</span><span class="p">]</span>
<span class="n">artist_lyrics</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">lyrics</span><span class="p">)</span>
<span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">print</span> <span class="s">'lyrics {} </span><span class="se">\r</span><span class="s">'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span>

    <span class="c1"># serialize
</span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">genre</span> <span class="o">+</span> <span class="s">'.json'</span><span class="p">,</span> <span class="n">mode</span> <span class="o">=</span> <span class="s">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fbuffer</span><span class="p">:</span>
        <span class="n">json</span><span class="p">.</span><span class="n">dump</span><span class="p">(</span><span class="n">genre_lyrics</span><span class="p">[</span><span class="n">genre</span><span class="p">],</span> <span class="n">fbuffer</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Check out the <a href="http://jekyllrb.com/docs/home">Jekyll docs</a> for more info on how to get the most out of Jekyll. File all bugs/feature requests at <a href="https://github.com/jekyll/jekyll">Jekyll’s GitHub repo</a>. If you have questions, you can ask them on <a href="https://talk.jekyllrb.com/">Jekyll Talk</a>.</p>


        </div>
    </div>
    <div class="post-divider"></div><div class="next-prev-post"><div>
            
            <a class="anchor next-prev-post-btn" title="Previous Post" href=/blog/technology/photoml-android-app/ rel="noopener">
    
    
        <div>
            <i aria-hidden="true" class='fa fa-arrow-left'></i>
        </div>
    
</a>
        </div><div>
        <button   title=Random Post  class="button next-prev-post-btn" onclick=redirectToRandomBlog();>
    
    
        <div>
            <i aria-hidden="true" class='fa fa-random'></i>
        </div>
    
</button>
    </div><div>
            
            <a class="anchor next-prev-post-btn" title="Next Post" href=/blog/technology/vscode-snippets-guide/ rel="noopener">
    
    
        <div>
            <i aria-hidden="true" class='fa fa-arrow-right'></i>
        </div>
    
</a>
        </div></div></div>
            </main><footer class="footer">
    <div class="footer-links">
        <a class="footer-link" rel="noopener" href="https://baijudodhia.github.io?utm_source=blog&utm_medium=footer" target="_blank">
            <i aria-hidden="true" class="fa fa-globe"></i>
            <span>baijudodhia.github.io</span>
        </a>
        <a class="footer-link" rel="noopener" href="https://www.github.com/baijudodhia/" target="_blank">
            <i aria-hidden="true" class="fa fa-github"></i>
            <span>baijudodhia</span>
        </a>
        <a class="footer-link" rel="noopener" href="https://www.linkedin.com/in/baijudodhia/" target="_blank">
            <i aria-hidden="true" class="fa fa-linkedin"></i>
            <span>baijudodhia</span>
        </a>
    </div>
</footer></div>
    </div>
</body></html>
